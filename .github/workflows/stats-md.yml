name: Daily Stats Update

on:
  schedule:
    - cron: "0 0 * * *"   # setiap hari jam 00:00 UTC (07:00 WIB)
  workflow_dispatch:

jobs:
  daily-stats:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.PAT_TOKEN }}

      - name: Generate stats.md
        run: |
          QUOTES=(
            "Believe you can and you're halfway there."
            "Success is the sum of small efforts repeated day in and day out."
            "Stay positive, work hard, make it happen."
            "Your only limit is your mind."
            "Small progress is still progress."
            "Focus on being better, not the best."
          )

          FACTS=(
            "The first computer bug was an actual moth stuck in a computer in 1947."
            "JavaScript was created in just 10 days by Brendan Eich."
            "Python was named after the comedy group Monty Python, not the snake."
            "The first programmer in history was Ada Lovelace in the 1800s."
            "The Linux kernel contains over 30 million lines of code."
            "Git was created by Linus Torvalds in 2005."
          )

          RANDOM_QUOTE=${QUOTES[$RANDOM % ${#QUOTES[@]}]}
          RANDOM_FACT=${FACTS[$RANDOM % ${#FACTS[@]}]}

          echo "# Daily Stats" > stats.md
          echo "" >> stats.md
          echo "**Last Update:** $(date)" >> stats.md
          echo "" >> stats.md
          echo "## âœ¨ Random Motivational Quote" >> stats.md
          echo "> \"$RANDOM_QUOTE\"" >> stats.md
          echo "" >> stats.md
          echo "## ðŸ’¡ Random Programming Fact" >> stats.md
          echo "- $RANDOM_FACT" >> stats.md
          echo "" >> stats.md
          echo "---" >> stats.md
          echo "_Auto-generated by GitHub Actions_" >> stats.md

      - name: Commit changes (count as contribution)
        run: |
          git config user.name "MuhAsmann"
          git config user.email "muhasmangit@gmail.com"
          git add stats.md
          git commit -m "chore: daily stats update" || echo "No changes"
          git push
